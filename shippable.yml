# {Rails.root}/shippable.yml
# shippleable example for rails 4 with mysql
language: ruby

rvm:
  - 2.3.0

env:
  - CI_REPORTS=shippable/testresults COVERAGE_REPORTS=shippable/codecoverage

before_install:
  - sudo apt-get -y update
  - sudo apt-get -y install libpq-dev
  - sudo apt-get -y install libgmp-dev
  - gem install bundler --pre

# ensure the test output and coverage dirs are created
before_script:
  - mkdir -p shippable/testresults
  - RAILS_ENV=test rake db:migrate

# write the rspec tests to the output dir
script:
  - rspec -o shippable/testresults/results.xml