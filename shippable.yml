# {Rails.root}/shippable.yml
# shippleable example for rails 4 with mysql
language: ruby

rvm:
  - 2.3.0

env:
  - CI_REPORTS=shippable/testresults COVERAGE_REPORTS=shippable/codecoverage ARCHFLAGS="-arch x86_64"

before_install:
  - sudo gem install pg

# ensure the test output and coverage dirs are created
before_script:
  - mkdir -p shippable/testresults
  - RAILS_ENV=test rake db:migrate

# write the rspec tests to the output dir
script:
  - bundle exec rspec -o shippable/testresults/results.xml