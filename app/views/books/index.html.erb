<h1>Books</h1>
<table class="table table-striped">
  <thead>
  <tr>
    <th>Name</th>
    <th>Author</th>
    <th>SKU</th>
    <th colspan="4">State</th>
  </tr>
  </thead>

  <tbody>
  <% @books.each do |book| %>
    <tr>
      <td><%= link_to book.name, book %></td>
      <td><%= book.author %></td>
      <td><%= book.sku %></td>
      <td><span class="<%= get_bootstrap_class_for_state book.state %>"><%= book.state %></span></td>
      <td>
        <% if can? :create, Rental and book.active? %>
          <%= link_to 'Rent', rentals_path(sku: book.sku), method: :post %>
        <% end %>
      </td>
      <% if can? :manage, book %>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>
<% if can? :create, Book %>
  <%= link_to 'Add a book', new_book_path, :class => 'btn btn-success' %>
<% end %>